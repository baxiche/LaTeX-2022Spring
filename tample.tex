\documentclass[12pt,a4paper]{article}
%設定頁面
\textwidth 170mm 
\usepackage{geometry}
\geometry{left=2cm=right,top=3cm=bottom}

%Typesetting

%about font shape
\usepackage{fontspec}
%\setmainfont{P22MayflowerPro}
\newcommand{\bt}[1]{%
    \begin{center}{\Large\textbf{#1}}\end{center}}
\newcommand{\bfit}[1]{%
    \textbf{\textit{#1}}}
\newcommand{\bfup}[1]{%
    \textbf{\textup{#1}}}
\newcommand{\mbf}[1]{%
    \textbf{\mathbf{#1}}}
\usepackage{type1cm}

\usepackage{xeCJK} 
\setCJKmainfont{STLibianTC-Regular}
\newCJKfontfamily\Kai{DFKaiShu-SB-Estd-BF} 
\newCJKfontfamily\lie{STLibianTC-Regular}
\XeTeXlinebreaklocale "zh"   
\XeTeXlinebreakskip = 0pt plus 1pt %設定中文
%\renewcommand\contentsname{目錄}

\usepackage[shortlabels]{enumitem}
%\usepackage{enumerate}

%about section
%\renewcommand{\thesection}{\Roman{section}.} 
%\renewcommand{\thesubsection}{\Roman{subsection}.} 
\setcounter{section}{1}
\setcounter{subsection}{1}

%color
\usepackage[dvipsnames]{xcolor}
\definecolor{yel}{RGB}{240,200,90}
\definecolor{3b1bblue}{RGB}{106,177,198}
\definecolor{3b1bred}{RGB}{220,100,90}
\definecolor{Green}{RGB}{50,180,30}
%\pagecolor{backgroud}
%\color{black}

%縮排
\usepackage{indentfirst}
\parindent=0pt 

%頁首、尾文字
\usepackage{fancyhdr}
\pagestyle{fancy}
\chead{}
\lhead{ (NTNU MATH, Spring 2022)}
\rhead{}
\lfoot{}
\cfoot{\thepage}
\rfoot{}
\newcommand{\fancy}[2]{%
    \lfoot{LECTURE #1. #2}\rhead{Lec #1}}
\renewcommand{\headrulewidth}{0.6pt} %上線寬
%\renewcommand{\footrulewidth}{0.4pt} %下線寬
%\renewcommand{\abstractname}{Executive Summary}
%\renewcommand{\chaptername}{}

% Math and some symbol
\usepackage{amsmath, amsthm, xfrac, amssymb}
\DeclareMathOperator{\Area}{Area}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\curl}{curl}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Sp}{span}
\DeclareMathOperator{\rk}{rank}
\DeclareMathOperator{\nul}{nullity}
\DeclareMathOperator{\rref}{rref}
\DeclareMathOperator{\im}{Im}

\newcommand{\re}{\mathbb{R}}
\newcommand{\na}{\mathbb{N}}
\newcommand{\inte}{\mathbb{Z}}
\newcommand{\eucl}{\mathbb{E}}
\newcommand{\ra}{\mathbb{Q}}
\newcommand{\comp}{\mathbb{C}}
\newcommand{\rs}{{\color{red}$\star$}}
\newcommand{\normal}{\trianglelefteq}
\newcommand{\action}{\circlearrowright}



\usepackage{pifont}
\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}
\newcommand{\cirnum}[1]{%
    \ding{\numexpr171+#1\relax}}
\newcommand{\Qed}{%
    \null\nobreak\hfill\ensuremath{\square}}

% defined integral
\newcommand{\Value}[1]{%
    \left.{#1}\phantom{\Big|}\right|}

%very nice
\usepackage{nicematrix}

\usepackage{cancel}
%\usepackage[thicklines]{cancel}
\newcommand{\Ccancel}[2][3b1bblue]{%
    \renewcommand\CancelColor{\color{#1}}\cancel{#2}}
\newcommand{\Dcancel}[2][red!70]{%
    \renewcommand\CancelColor{\color{#1}}\cancel{#2}}
\newcommand{\Ecancel}[2][black]{%
    \renewcommand\CancelColor{\color{#1}}\cancel{#2}}

\newcommand{\red}[1]{%
    {\color{red!70}{#1}}}

\usepackage{mathrsfs} %English Calligraphy
\usepackage{bm}

\usepackage{soul}
\setul{0.5ex}{0.2ex}
\setulcolor{red}
% underline with red color

\usepackage{tikz}
\usepackage{tikz-cd}

\usepackage{mathtools}
%\newcommand{\verteq}{\rotatebox{90}{$\,=$}}
%\newcommand{\equalto}[2]{\underset{\scriptstyle\overset{\mkern4mu\verteq}{#2}}{#1}}
\newcommand{\veq}{\mathrel{\rotatebox{90}{$=$}}}
\newcommand{\vneq}{\mathrel{\rotatebox{90}{$\neq$}}}
\usepackage{extarrows} % arrow with text
\newcommand{\litrom}[1]{%
    \romannumeral#1}
\newcommand{\caprom}[1]{%
    \uppercase\expandafter{\romannumeral#1}}
%羅馬數字

\newtheorem{thm}{Theorem}
\newtheorem*{lemma}{Lemma}
\newtheorem{corollary}{Corollary}

\setcounter{page}{1}
%\pagenumbering{roman}
%\pagestyle{plain}
%設定頁碼

%simply box
\usepackage{varwidth}
\setlength{\fboxrule}{0.6pt}
\newcommand{\varbox}[1]{%
    \fbox{\varwidth{\linewidth}#1\endvarwidth}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcounter{prop} 
\setcounter{prop}{3}
\renewcommand{\theprop}{\arabic{prop}}
\newcommand{\prop}{%
    \refstepcounter{prop}{\bf{Proposition \theprop.}}}
\newcommand{\cor}{%
    \refstepcounter{prop}{\bfit{Corollary \theprop. }}}

%Throrem in the box
\usepackage[framemethod=TikZ]{mdframed}
%\mdtheorem{boxdef}{Defintion.}
%\newmdtheoremenv{boxx}[lemma]{Theorem}
%\newmdtheoremenv{lemo}{Lemma}
%\newmdenv{}{}

%Just a box
\newcounter{boxthm} 
\setcounter{boxthm}{0}
\renewcommand{\theboxthm}{\arabic{boxthm}}
\newenvironment{boxthm}[2][]{%
    \refstepcounter{boxthm}
    \mdfsetup{%
        innertopmargin=10pt,%
        innerbottommargin=10pt,%
        linecolor=black,%
        linewidth=0.6pt,topline=true,%
        frametitleaboveskip=\dimexpr-\ht\strutbox\relax}
    \begin{mdframed}
        \textbf{\textit{Theorem \theboxthm#1}}\it\relax%
        \label{#2}
    }{\end{mdframed}}

\newcounter{boxdef} 
\setcounter{boxdef}{0}
\renewcommand{\theboxdef}{\arabic{boxdef}}
\newenvironment{boxdef}[2][]{%
    \refstepcounter{boxdef}
    \mdfsetup{%
        innertopmargin=10pt,%
        innerbottommargin=10pt,%
        linecolor=black,%
        linewidth=0.6pt,topline=true,%
        frametitleaboveskip=\dimexpr-\ht\strutbox\relax
    }
    \begin{mdframed}
        \textbf{\textit{Definition \theboxdef#1}}\it\relax%
    \label{#2}
    }{\end{mdframed}}

\newenvironment{boxx}[1][]{%
    \mdfsetup{%
        innertopmargin=10pt,%
        innerbottommargin=10pt,%
        linecolor=black,%
        linewidth=0.6pt,topline=true,%
        frametitleaboveskip=\dimexpr-\ht\strutbox\relax}
    \begin{mdframed}\relax}{\end{mdframed}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Add graph
\usepackage{import}
\usepackage{xifthen}
\usepackage{pdfpages}
\usepackage{transparent}
\newcommand{\incfig}[1]{%
    \def\svgwidth{\columnwidth}
    \import{/Users/baxiche/Documents/LaTeX/Drawing/}{#1.pdf_tex}
}

\title{Solutions of selection problems}
%\author{}
%\date{}
\begin{document}
\fontsize{12pt}{20pt}\selectfont
%\maketitle
%\tableofcontents

Just test for new trash session.

\[
    \begin{pNiceMatrix}[margin]
    \Block[borders={bottom,right}]{3-3}{\begin{array}{ccc}
      \lambda & 1       & 0       \\
      0       & \lambda & 1       \\
      0       & 0       & \lambda \\
    \end{array}} & & & 0 & 0 & 0 & 0 & 0 & 0   \\
    & &  & 0 & 0 & 0 & 0 & 0 & 0 \\
    & &  & 0 & 0 & 0 & 0 & 0 & 0 \\
    0 & 0 & 0 & \Block[draw]{3-3}{\begin{array}{ccc}
      \lambda & 1       & 0       \\
      0       & \lambda & 1       \\
      0       & 0       & \lambda \\
    \end{array}} & & & 0 & 0 & 0 \\
    0 & 0 & 0 &                       & & & 0 & 0 & 0 \\
    0 & 0 & 0 &                       & & & 0 & 0 & 0 \\
    0 & 0 & 0 & 0 & 0 & 0 & \Block[draw]{2-2}{\begin{array}{cc}
      \lambda & 1        \\
      0       & \lambda  \\  
    \end{array}} & & 0 \\
    0 & 0 & 0 & 0 & 0 & 0 & & & 0 \\
    0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & \Block[borders={left,top}]{1-1}{\begin{array}{c} \lambda \end{array}} 
    \end{pNiceMatrix}=\begin{pNiceMatrix}[margin]
      \Block[borders={bottom,right}]{1-1}{J_1} & O & O & O  \\
      O & \Block[draw]{1-1}{J_2} & O & O  \\
      O & O & \Block[draw]{1-1}{J_3} & O \\
      O & O & O & \Block[borders={top,left}]{1-1}{J_4}
    \end{pNiceMatrix}
    \]
        
\end{document}
